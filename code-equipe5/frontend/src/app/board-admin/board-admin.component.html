<div class="container">
  <header class="jumbotron">
    <h2>Tableau de bord des Tests Automatisés</h2>

    <!-- Filtres -->
    <div class="filters">
      <label>Filtrer par outil :</label>
      <select [(ngModel)]="selectedTool" (change)="filterResults()">
        <option *ngFor="let tool of tools" [value]="tool">{{ tool }}</option>
      </select>

      <label>Filtrer par statut :</label>
      <select [(ngModel)]="selectedStatus" (change)="filterResults()">
        <option *ngFor="let status of statuses" [value]="status">{{ status }}</option>
      </select>

      <label>Filtrer par date :</label>
      <input type="date" [(ngModel)]="selectedDate" (change)="filterResults()">

      <label>Filtrer par utilisateur :</label>
      <select [(ngModel)]="selectedExecutedBy" (change)="filterResults()">
        <option *ngFor="let user of executedBys" [value]="user">{{ user }}</option>
      </select>
    </div>

    <!-- KPI -->
    <div class="kpis">
      <p>Total des tests : {{ totalTests }}</p>
      <p>Pourcentage de tests réussis : {{ passedPercentage }}%</p>
      <p>Temps moyen d'exécution : {{ avgExecutionTime }}</p>
    </div>

    <!-- Graphiques -->    
    <div class="chart-container">
      <canvas id="MyDoughnutChart"></canvas>
      <canvas id="MyBarChart"></canvas>
    </div>

    <!-- Tableau des résultats -->
    <table class="table table-bordered table-striped">
      <thead>
        <tr>
          <th>Nom du Test</th>
          <th>Outil</th>
          <th>Statut</th>
          <th>Temps d'Exécution</th>
          <th>Date</th>
          <th>Exécuté par</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let test of filteredTestResults">
          <td>{{ test.label }}</td> <!-- Nom ou label du test -->
          <td>{{ test.tool }}</td> <!-- Nom de l'outil utilisé pour le test -->
          <td [ngClass]="{
            'text-success': test.success,
            'text-danger': !test.success
          }">{{ test.success ? 'passed' : 'failed' }}</td> <!-- Statut avec classe -->
          <td>{{ test.elapsed }}ms</td> <!-- Temps d'exécution -->
          <td>{{ test.date | date: 'dd/MM/yyyy HH:mm' }}</td> <!-- Date formatée -->
          <td>{{ test.threadName }}</td> <!-- Utilisateur qui a exécuté le test -->
        </tr>
      </tbody>
    </table>
  </header>
</div>
